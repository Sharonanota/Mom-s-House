(window.webpackJsonp=window.webpackJsonp||[]).push([[127,11,15,18],{14:function(e,t,r){"use strict";t.a={collections:{search_collections:"collections:search_collections"},download_btn:{initial_click:"download_btn:initial_click"},editor:{command:"commandexec",load:"editor:load"},modal:{close_modal:"modal:close_modal"},search:{apply_filters:"search:apply_filters",click:"search:click",sponsored_click:"search:sponsored_click",update_content_type:"search:update_content_type"},show_page:{modal:{build_resource_navigation_context:"show_page:modal:build_resource_navigation_context",history_close_modal_view:"show_page:modal:history_close_modal_view",reload_modal_view:"show_page:modal:reload_modal_view",update_resource_navigation_context:"show_page:modal:update_resource_navigation_context"},reveal_free_attribution_slidedown:"show_page:reveal_free_attribution_slidedown"},turbolinks:{load:"turbolinks:load"},checkout:{error:"checkout:error",new_tax_response:"checkout:new_tax_response",reset_tax:"checkout:reset_tax"},util:{ez_drop_down:{close_drop_down:"util:ez_drop_down:close_drop_down"}}}},1416:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return _}));var n=r(38),o=r(112),i=r.n(o),a=r(14),c=r(2),l=r(7),s=r(8),u=r(142);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return(h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(b,e);var t,r,n,o=m(b);function b(){var e;d(this,b);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).completeEventsToProcess=[],e.saveNewCollection=function(t){t.preventDefault(),e.validateFields((function(){e.collectionWithName()?e.saveToCollection(t):(e.element.setAttribute("action",e.collectionSaveAction),e.addCompleteEvent(s.k),e.addCompleteEvent(s.n),e.saveCollection())}))},e.saveToCollection=function(t){t.preventDefault();var r=e.targetIsCollectionListItem(t.currentTarget)?t.currentTarget:e.collectionWithName(),n=r.getAttribute("data-collection-id"),o=r.getAttribute("data-privacy");e.searchForm.value=Object(c.P)(r.querySelector(".collections-list__item__name").innerHTML),e.collectionPrivacyField.value=o,e.element.setAttribute("action","".concat(e.collectionSaveAction,"/").concat(n,"/items")),e.addCompleteEvent(s.n),e.saveCollection()},e.removeFromCollection=function(t){t.preventDefault();var r=e.targetIsCollectionListItem(t.currentTarget)?t.currentTarget:e.collectionWithName(),n=r.getAttribute("data-collection-id"),o=r.getAttribute("data-collection-item-id");e.element.querySelector("#collection-item-id").insertAdjacentHTML("beforebegin",'<input type="hidden" name="_method" value="delete">'),e.element.setAttribute("action","".concat(e.collectionSaveAction,"/").concat(n,"/items/").concat(o)),e.addCompleteEvent(s.l),e.saveCollection()},e.saveCollection=function(){return e.element.addEventListener("ajax:success",e.ajaxSuccess.bind(v(e))),i.a.fire(e.element,"submit"),Object(c.O)(a.a.modal.close_modal),!0},e}return t=b,(r=[{key:"connect",value:function(){this.searchForm=document.querySelector('[data-controller="collections-search-form"]'),this.collectionPrivacyField=this.element.querySelector("#collection_private"),this.collectionSaveAction=this.element.getAttribute("action"),Object(c.O)("hidePromoPopup"),Object(c.O)("hideCollectionAlert")}},{key:"ajaxSuccess",value:function(e){var t=this,r=e.detail[0].body.innerHTML;document.body.insertAdjacentHTML("beforeend",r),this.completeEventsToProcess.forEach((function(e){return t.trackEvent(e)})),this.completeEventsToProcess=[]}},{key:"addCompleteEvent",value:function(e){this.completeEventsToProcess.push(e)}},{key:"trackEvent",value:function(e){Object(l.k)({data:{action:e,label:this.isProValue?"Pro":"Free",content_type:"Content-".concat(this.contentTypeValue)}})}},{key:"validateFields",value:function(e){h(y(b.prototype),"validateFields",this).call(this),this.formValid&&e()}},{key:"collectionWithName",value:function(){var e=Object(u.b)(this.searchForm.value);return!(Object(c.P)(e).length<=0)&&this.collectionsListTarget.querySelector('[data-collection-name="'.concat(e,'"]'))}},{key:"targetIsCollectionListItem",value:function(e){return e.getAttribute("data-collections-modal-target").indexOf("collectionsListItem")>-1}}])&&f(t.prototype,r),n&&f(t,n),b}(n.a);_.targets=["collectionsList"],_.values={contentType:String,isPro:Boolean}},142:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r(2);function o(){return document.querySelector('[data-target="search-results-main-wrap"]').getAttribute("data-no-results")}function i(e){return Object(n.P)(e).toLowerCase().replace(/[^a-zA-Z0-9 ]/g,"")}},22:function(e,t,r){"use strict";function n(e,t){return!!e.hasAttribute("data-errors")&&JSON.parse(e.getAttribute("data-errors"))[t]}function o(e){return/^(([^*<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function i(e){return e.length<3?"invalid_characters":e.length>32?"username_length":!!e.match(/^[a-zA-Z0-9._\-+]+$/)||"invalid_characters"}function a(e){return e.trim()<=0?"field_empty_error":!(e.length>30)||"teamname_max_length"}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return a}))},38:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r(13),o=r(112),i=r.n(o),a=r(24),c=r(215),l=r(291),s=r(22),u=r(55),d=r(2),f=r(7),h=r(8);r(520);function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(m,e);var t,r,n,o=_(m);function m(){var e;b(this,m);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).triggerCaptchaAndValidateFields=function(t){if(t.preventDefault(),e.showSpinner(),Object(d.J)())e.validateFields();else{window.handleRecaptchaResponse=e.handleRecaptchaResponse;var r=e.element.querySelector(".recaptcha-holder").dataset.recaptchaId;window.grecaptcha.reset(r),window.grecaptcha.execute(r)}},e.handleRecaptchaResponse=function(){e.validateFields(),window.handleRecaptchaResponse=null},e}return t=m,(r=[{key:"connect",value:function(){this.formValid=!1,this.detectAutofill(),this.animLabelInputs.length&&Object(l.a)(this.animLabelInputs),this.element.querySelectorAll(".ez-input__field--password").length&&Object(c.a)(),this.flagLoaded()}},{key:"animLabelInputs",get:function(){return p(this.element.querySelectorAll(".ez-input.ez-input--animated-label"))}},{key:"detectAutofill",value:function(){var e=this;document.addEventListener("onautocomplete",(function(t){"checkbox"!==t.target.type&&"radio"!==t.target.type&&"select"!==t.target.type&&"select-one"!==t.target.type&&e.element.classList.add("is-autofilled")}))}},{key:"submit",value:function(){Object(d.J)()&&this.bypassRecaptcha(),"true"===this.element.getAttribute("data-remote")?i.a.fire(this.element,"submit"):this.element.submit()}},{key:"trackFormComplete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,r=void 0===t?null:t,n=e.category,o=void 0===n?null:n,i=e.label,a=void 0===i?null:i,c=this.element.classList.contains("is-autofilled");Object(f.k)({element:r||this.element,data:{action:h.O,category:o||Object(f.d)(this.element),label:a||"Autofill-".concat(c)}})}},{key:"bypassRecaptcha",value:function(){var e=document.querySelector("input#bypass_captcha");e&&(e.value=!0)}},{key:"validateFields",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[required="required"]';Object(d.J)()||this.resetFormErrors(),this.checkFields(e),this.formValid||this.hideSpinner()}},{key:"resetFormErrors",value:function(){Object(a.a)(this.element)}},{key:"checkFormValidity",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.formValid=!0;var r=[].concat(p(this.element.querySelectorAll('input[required="required"]')),p(this.element.querySelectorAll('select[required="required"]')));r.forEach((function(t){var r=t.closest(".ez-input"),n=r.querySelector(".ez-input__field"),o=r.contains(n)?n:r.querySelector("input");r.classList.contains("ez-input--checkbox")&&((o=r.querySelector('[type="checkbox"]')).checked||(e.formValid=!1)),e.fieldHasError(o)&&(e.formValid=!1)})),t&&t instanceof Function&&t(),!0===this.formValid?this.formSubmitBtnTarget.classList.remove("is-disabled"):this.formSubmitBtnTarget.classList.add("is-disabled")}},{key:"fieldHasError",value:function(e){return!!(("INPUT"===e.tagName||"SELECT"===e.tagName)&&""===e.value||"email"===e.getAttribute("type")&&!Object(s.a)(e.value)||e.classList.contains("error")||"DIV"===e.tagName&&!e.classList.contains("braintree-hosted-fields-valid")||e.closest(".ez-input.has-errors"))}},{key:"checkFields",value:function(e){var t=this;this.formValid=!0,p(this.element.querySelectorAll(e)).forEach((function(e){"text"===e.getAttribute("type")&&(e.value=e.value.trim()),t.checkForEmptyField(e),t.checkForSpecialChars(e),t.checkEmailFields(e)}));var r=this.element.querySelector("#user_password"),n=this.element.querySelector("#user_password_confirmation");r&&n?this.checkPasswordFields({passwordField:r,passwordConfirmField:n}):r&&this.checkPasswordField(r)}},{key:"checkForEmptyField",value:function(e){var t=e.getAttribute("id"),r="";Object(s.b)(e,"field_empty_error")&&(r=Object(s.b)(e,"field_empty_error")),"user_accept_terms"===t&&(r=Object(s.b)(e,"checkbox_error")),this.displayErrorIfEmpty(t,r)}},{key:"checkForSpecialChars",value:function(e){Object(s.b)(e,"special_characters")&&this.displayErrorIfSpecialChars(e)}},{key:"checkEmailFields",value:function(e){"email"===e.getAttribute("type")&&this.displayErrorIfEmailInvalid(e)}},{key:"checkPasswordField",value:function(e){e&&e.checkValidity()&&this.displayErrorIfPasswordTooShort(e)&&(Object(a.b)(e),Object(a.b)(e,Object(s.b)(e,"password_length")),this.sendFormSubmissionErrorEvent(e),this.formValid=!1)}},{key:"checkPasswordFields",value:function(e){var t=e.passwordField,r=e.passwordConfirmField;(t&&t.checkValidity()||r&&r.checkValidity())&&!this.displayErrorIfFieldMismatch(t,r,"password_mismatch")&&this.displayErrorIfPasswordTooShort(t)&&(Object(a.b)(t),Object(a.b)(r,Object(s.b)(r,"password_length")),this.sendFormSubmissionErrorEvent(t),this.formValid=!1)}},{key:"displayFormError",value:function(e){var t=e.field,r=e.errorMessage,n=e.triggerType;this.formSubmitBtnTarget.classList.contains("has-spinner")&&this.hideSpinner();var o=t.closest(".ez-input");this.fieldShowingErrors(o)||Object(f.k)({element:t,data:{action:h.P,label:"Field-".concat(t.dataset.englishLabel),category:"Account",error_trigger:"Error-".concat(n)}}),Object(a.b)(t,r),this.formValid=!1}},{key:"displayErrorIfEmpty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.element.querySelector("#".concat(e));null===r||r.checkValidity()||(Object(a.b)(r,t),this.sendFormSubmissionErrorEvent(r),this.formValid=!1)}},{key:"displayErrorIfPasswordTooShort",value:function(e){var t=e.value.length;return t>=0&&t<6}},{key:"displayErrorIfFieldMismatch",value:function(e,t,r){return e.value!==t.value&&(Object(a.b)(e),Object(a.b)(t,Object(s.b)(t,r)),this.sendFormSubmissionErrorEvent(e),this.formValid=!1,!0)}},{key:"displayErrorIfEmailInvalid",value:function(e){(e&&e.value&&!Object(s.a)(e.value)||!e.value)&&(Object(a.b)(e,Object(s.b)(e,"invalid_email")),this.sendFormSubmissionErrorEvent(e),this.formValid=!1)}},{key:"displayErrorIfSpecialChars",value:function(e){this.hasInvalidChars(e.value)&&(Object(a.b)(e,Object(s.b)(e,"special_characters")),this.sendFormSubmissionErrorEvent(e),this.formValid=!1)}},{key:"fieldShowingErrors",value:function(e){return e.classList.contains("has-errors")}},{key:"hasInvalidChars",value:function(e){return e.match(/[^a-zA-Z0-9 ]/g)}},{key:"showSpinner",value:function(){this.hasFormSubmitBtnTarget&&!this.formSubmitBtnTarget.classList.contains("has-spinner")&&(this.disableWithAttr=this.formSubmitBtnTarget.getAttribute("data-disable-with"),this.formSubmitBtnTarget.removeAttribute("data-disable-with"),Object(u.b)(this.formSubmitBtnTarget))}},{key:"hideSpinner",value:function(){this.hasFormSubmitBtnTarget&&this.formSubmitBtnTarget.classList.contains("has-spinner")&&(Object(u.a)(this.formSubmitBtnTarget),this.formSubmitBtnTarget.setAttribute("data-disable-with",this.disableWithAttr))}},{key:"sendFormSubmissionErrorEvent",value:function(e){Object(f.k)({element:e,data:{action:h.P,label:"Field-".concat(e.dataset.englishLabel),category:"Account",error_trigger:"Error-Submission"}})}}])&&v(t.prototype,r),n&&v(t,n),m}(n.a);k.targets=["formSubmitBtn"]}}]);
//# sourceMappingURL=collections-modal-form-controller-1e90a3a7513110ea7055.chunk.js.map