(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{1276:function(e,t,r){"use strict";r.r(t);r(717),r(718),r(719),r(720),r(721),r(722),r(723),r(724);var n=r(5),o=r(13),i=r(7),a=r(8),c=r(2),s=r(18),u=r(89),l=r(14),d=r(9),f=r.n(d);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(725);var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(d,e);var t,r,n,o=m(d);function d(){var e;p(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).gridObserver=null,e.remove=function(){e.element.remove()},e.initGrid=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e.element.classList.contains("ez-resource-grid--partner")){(!e.element.dataset.instantGrid||e.element.dataset.instantGrid&&t)&&window.ezResourceGrid({gridSelector:e.element,options:{rowHeight:parseInt(e.element.getAttribute("data-row-height"),10),maxRows:parseInt(e.element.getAttribute("data-max-rows"),10),truncate:!!e.element.getAttribute("data-truncate-results")}});var r=e.element.querySelectorAll(".ez-resource-grid__item");r.forEach((function(e,t){e.setAttribute("data-position",t+1)}))}},e.trackResourceClick=function(t){var r="true"===t.currentTarget.closest(".ez-resource-thumb").dataset.pro?"Pro":"Free";Object(i.k)({element:t.currentTarget,data:{action:a.o,label:r,content_type:"Content-".concat(t.currentTarget.dataset.contentType)}}),"Free"===r&&Object(u.c)({searchTerm:e.searchTerm||f.a.get("most_recent_search")})},e.trackResourceRightClick=function(e){var t=e.target.closest(".ez-resource-thumb");t&&("Free"===("true"===t.dataset.pro?"Pro":"Free")&&Object(u.c)({display:!1}))},e.loadModalShow=function(t){if(Object(c.n)()>1e3){t.preventDefault();var r=t.currentTarget.getAttribute("href");Object(s.e)(r),e.sendShowPageModalClick(t),Object(c.O)(l.a.show_page.modal.build_resource_navigation_context,{targetResourcePath:r,targetResourceGroup:t.currentTarget.closest('[data-controller*="resources-grid"]')})}},e.nopeResource=function(t){t.preventDefault(),t.stopImmediatePropagation();Object(s.d)("/admin/search/search_term_options/exclude",e.afterSearchTweak,(function(){}),e.stoParams(e.parseResourceId(t)))},e.excludeTerm=function(t){t.preventDefault(),t.stopImmediatePropagation();var r=prompt("enter term to exclude"),n={term:e.searchTerm,locale:e.locale,content_type:e.contentType,excluded_term:r};Object(s.d)("/admin/search/search_term_options/exclude_term",e.afterSearchTweak,(function(){}),n)},e.stoParams=function(t){return{term:e.searchTerm,locale:e.locale,content_type:e.contentType,resource_id:t}},e.afterSearchTweak=function(){window.EezyScrollPositionHelper.preservePositionOnce(),Turbolinks.visit(window.location)},e}return t=d,(r=[{key:"shouldTrackTruncation",get:function(){return this.hasTrackTruncationValue&&this.trackTruncationValue}},{key:"connect",value:function(){this.initGrid(),window.addEventListener("InitAllGrids",this.initGrid),this.element.parentNode.classList.contains("ez-search-results")&&this.insertSearchDeboostingButtons(),this.shouldTrackTruncation&&this.trackResourceTruncation(),this.element.addEventListener("contextmenu",this.trackResourceRightClick)}},{key:"trackResourceTruncation",value:function(){if(this.hasGridItemTarget){var e=this.gridItemTargets.length,t=this.gridItemTargets.filter((function(e){return"none"===e.style.display})).length,r=Object(c.l)(t,e);Object(i.j)({search_results_percent_hidden:r})}}},{key:"disconnect",value:function(){window.removeEventListener("InitAllGrids",this.initGrid),this.element.removeEventListener("contextmenu",this.trackResourceRightClick),this.gridObserver&&this.gridObserver.disconnect()}},{key:"sendShowPageModalClick",value:function(e){var t="true"===e.currentTarget.closest(".ez-resource-thumb").dataset.pro?"Pro":"Free";Object(i.k)({element:e.currentTarget,data:{action:a.Ub,label:t,content_type:"Content-".concat(e.currentTarget.dataset.contentType)}})}},{key:"insertSearchDeboostingButtons",value:function(){if(this.showDeboost){document.querySelectorAll(".ez-search-results .ez-resource-thumb__link").forEach((function(e){var t=document.createElement("DIV");t.classList.add("ez-resource-thumb__link__admin"),t.classList.add("ez-resource-thumb__link__admin--nope"),t.dataset.action="click->resources-grid#nopeResource",e.appendChild(t)}));var e=document.querySelectorAll(".ez-resource-grid")[0],t=document.createElement("a"),r=document.createTextNode("exclude term");t.appendChild(r),t.dataset.action="click->resources-grid#excludeTerm",t.href="#",e.appendChild(t)}}},{key:"showDeboost",get:function(){return document.body.classList.contains("is-admin")&&document.body.classList.contains("searches-show")&&Object(c.e)("search-deboost")&&"vector"!==this.contentType}},{key:"searchTerm",get:function(){var e=document.querySelector("[data-search-term]");return e?e.getAttribute("data-search-term"):""}},{key:"locale",get:function(){return document.documentElement.getAttribute("lang")}},{key:"contentType",get:function(){return document.querySelector("#search").getAttribute("data-content-type")}},{key:"parseResourceId",value:function(e){return e.target.parentNode.parentNode.dataset.itemId}}])&&v(t.prototype,r),n&&v(t,n),d}(o.a);b.values={trackTruncation:Boolean},b.targets=["gridItem"];var w=r(494),T=r(11);function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=new(r(40).a),S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,r,n,o=P(i);function i(){var e;k(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).videoSelector='[data-video-preview-target*="preview"]',e.addPreviewEvents=function(){e.previewTargets.forEach((function(t){t.addEventListener("mouseenter",e.playVideo,!1),t.addEventListener("mouseleave",e.maybePauseVideo,!1)}))},e.removePreviewEvents=function(){e.previewTargets.forEach((function(t){t.removeEventListener("mouseenter",e.playVideo),t.removeEventListener("mouseleave",e.maybePauseVideo)}))},e.pauseHiddenVideos=function(t){e.element.querySelectorAll("video").forEach((function(r){r!==t.target&&e.pauseVideo(r,!0)}))},e.playVideo=function(t){t.stopPropagation();var r=t.currentTarget;r.querySelector("video")||e.addVideoToDOM(r),e.videoPlayIntent=setTimeout((function(){var e=r.querySelector("video"),t=e.play();void 0!==t&&t.then((function(){e.loop=!0,e.readyState>=3&&r.classList.add("is-playing")}))}),150)},e.maybePauseVideo=function(t){clearTimeout(e.videoPlayIntent);var r=t.currentTarget.querySelector("video");r.closest(e.videoSelector).classList.contains("is-active")||e.pauseVideo(r,!0)},e}return t=i,(r=[{key:"connect",value:function(){if(!this.hasPreviewTarget)return!1;this.setupPreviewMediaQueries(),document.addEventListener("play",this.pauseHiddenVideos,!0),R.evaluateAll(),R.addListeners()}},{key:"disconnect",value:function(){this.removeListeners(),R.removeListeners(),R.clearQueries()}},{key:"removeListeners",value:function(){document.removeEventListener("play",this.pauseHiddenVideos),this.removePreviewEvents()}},{key:"addVideoToDOM",value:function(e){var t=e.dataset.videoUrl,r='<div class="video-wrapper">\n                        <video autoplay="true" preload="none" muted playsinline>\n                          <source src="'.concat(t,'" type="video/mp4">\n                        </video>\n                      </div>');e.querySelector('[data-video-preview-target*="videoWrap"]').insertAdjacentHTML("beforeend",r)}},{key:"isPlaying",value:function(e){var t=e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2;return t}},{key:"pauseVideo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isPlaying(e)){e.closest(this.videoSelector).classList.remove("is-playing"),e.pause();var r=e.querySelector("source"),n=r.src;r.src="",r.removeAttribute("src"),e.load(),r.src=n,e.pause(),t&&(e.currentTime=0)}}},{key:"setupPreviewMediaQueries",value:function(){var e=this;R.addMediaQuery("(min-width: 1024px)",(function(){e.addPreviewEvents()}),(function(){e.removePreviewEvents()}))}}])&&_(t.prototype,r),n&&_(t,n),i}(T.b);S.targets=["preview"],n.default.register("resources-grid",b),n.default.register("thumbnail-contributor-info",w.default),Promise.all([r.e(16),r.e(55),r.e(160)]).then(r.bind(null,494)).then((function(e){n.default.register("thumbnail-contributor-info",e.default)})),n.default.register("video-preview",S)},717:function(e,t,r){},718:function(e,t,r){e.exports=r.p+"media/components/resources/grid/img/blank-103f82cb49b0d3f1fbc25493182bae28.png"},719:function(e,t,r){e.exports=r.p+"media/components/resources/grid/img/gradient-star-ac236c448ff35c7ab3ae59b6f5b1c846.svg"},720:function(e,t,r){e.exports=r.p+"media/components/resources/grid/prototype/thumb1-c0aebfd831a298c4d4137c42c427a6f0.jpg"},721:function(e,t,r){e.exports=r.p+"media/components/resources/grid/prototype/thumb2-6893848703de992aa54f91e0d347d9ab.jpg"},722:function(e,t,r){e.exports=r.p+"media/components/resources/grid/prototype/thumb3-777f1fc2012b00e1f11bae9f871238e5.jpg"},723:function(e,t,r){},724:function(e,t,r){}}]);
//# sourceMappingURL=71-bfed21c0f137cd2c69d6.chunk.js.map