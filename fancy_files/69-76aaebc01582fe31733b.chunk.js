(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{1130:function(e,t,n){},1131:function(e,t,n){},1132:function(e,t,n){},1133:function(e,t,n){},1134:function(e,t,n){e.exports=n.p+"media/components/resources/show/daily-limit-join-pro-modal/img/guage-icon-55dd5a91c6be322d254e6b48d5a2cc5f.svg"},1135:function(e,t,n){},1263:function(e,t,n){"use strict";n.r(t);n(1130),n(1131),n(1132),n(1133),n(1134),n(1135);var o=n(5),r=(n(292),n(13)),a=n(9),i=n.n(a),c=n(18),l=n(97),s=n(2),u=n(99),d=n(14),f=n(79),p=n(7),h=n(8),g=n(27),w=n.n(g),y=n(55),v=n(63);function b(e,t,n,o,r,a,i){try{var c=e[a](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(o,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){b(a,o,r,i,c,"next",e)}function c(e){b(a,o,r,i,c,"throw",e)}i(void 0)}))}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=S(e);if(t){var r=S(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(a,e);var t,n,o,r=k(a);function a(){var e;O(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).clickProcessing=!1,e.previewImageTriggerClick=function(){e.sendDownloadEvent(),"editorial"===e.resourceLicense?e.freeDownload():Object(c.e)(e.element.href)},e.proJoin=function(e){i.a.set("download_size_for_checkout",e.currentTarget.dataset.size)},e.proDownload=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&t.preventDefault(),!0!==e.clickProcessing){e.clickProcessing=!0;var n=e.getDownloadSize(t,null===t||void 0===t?void 0:t.currentTarget);e.exceededDownloadLimit?e.openDownloadLimitModal():(e.triggerDownload(t,{size:n}),e.dailyDownloadCountValue+=1),e.clickProcessing=!1,null!==t&&void 0!==t&&t.currentTarget.hasAttribute("data-license-selector-credit-radio-target")||Object(u.c)()}},e.freeDownload=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&t.preventDefault(),!0!==e.clickProcessing){e.clickProcessing=!0;var n=e.getDownloadSize(t,null===t||void 0===t?void 0:t.currentTarget);if(Object(u.d)())e.element.dataset.dlAdModalPath&&e.setDownloadCookie(e.element.dataset.dlAdModalPath,n),e.dailyDownloadCountValue-=1,e.openReturningSigninModal();else if(e.exceededDownloadLimit)e.element.dataset.dlAdModalPath&&e.setDownloadCookie(e.element.dataset.dlAdModalPath,n),e.openDownloadLimitModal();else if(e.element.dataset.dlAdModalPath){if(e.showDownloadAdPopup(),"original"!==n){var o=e.getDownloadFileUrl(t);e.processDlSize({url:o,size:n})}"editorial"!==e.element.getAttribute("data-license-type")&&e.showFreeAttributionSlidedown()}else e.triggerDownload(t,{size:n});document.querySelector(".is-logged-in")&&Object(s.e)("customer-feedback")&&Object(u.c)(),e.clickProcessing=!1,e.dailyDownloadCountValue+=1}},e.triggerDownload=function(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.size,a=void 0===r?"original":r,i=o.reloadPage,c=void 0!==i&&i;Object(f.a)(e.resourceId);var l=null!==t&&void 0!==t&&null!==(n=t.detail)&&void 0!==n&&n.size?t.detail.size:a,s=e.getDownloadFileUrl(t);"original"===l||e.dlPopupReady?(e.mainDlBtn.classList.contains("has-spinner")||Object(y.b)(e.mainDlBtn),e.deliverFile({url:s,downloadSize:l,reloadPage:c})):e.processDlSize({url:s,size:l,reloadPage:c})},e.urlCheck=function(e){return"undefined"===typeof e.data.url},e.pollForConvertedDlSize=function(){var t=m(regeneratorRuntime.mark((function t(n){var o,r,a,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.fn,r=n.fnCondition,a=n.jobId,i=n.interval,t.next=3,o(a);case 3:c=t.sent;case 4:if(!r(c)){t.next=12;break}return t.next=7,e.waitForConvertedDlSize(i);case 7:return t.next=9,o(a);case 9:c=t.sent,t.next=4;break;case 12:return t.abrupt("return",c);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.waitForConvertedDlSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){setTimeout(t,e)}))},e.checkSizeConversion=function(e){return w.a.get("/api/v2/resource_conversion/".concat(e))},e.proceedWithDownload=function(){e.sendDownloadEvent(),e.trackFreeLicenseSelectorTrigger({currentTarget:e.element})},e.spendCreditAndDownload=function(t){var n=t.event,o=t.downloadSize;Object(u.c)({onReload:!0}),e.triggerDownload(n,{size:o,reloadPage:!0}),e.creditSpent=!0},e}return t=a,(n=[{key:"connect",value:function(){if(this.mainDlBtn=this.element,!this.isTurbolinksPreview){var e=window.localStorage.getItem("resource-".concat(this.resourceId));e&&(this.searchData=JSON.parse(e),window.localStorage.removeItem("resource-".concat(this.resourceId))),this.flagLoaded(),this.checkDownloadCookie()}"pro-btn"===this.element.id&&this.trackLicenseTriggerEvent()}},{key:"disconnect",value:function(){window.removeEventListener("ProceedWithFreeDownload",this.proceedWithDownload)}},{key:"resourceLicense",get:function(){return document.querySelector(".ez-resource-show").dataset.resourceType}},{key:"getDownloadSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="original";return e?"undefined"!==typeof e.detail.dlSize?e.detail.dlSize:t&&t.dataset&&"undefined"!==typeof t.dataset.size?t.dataset.size:n:n}},{key:"getDownloadFileUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.element.getAttribute("href");return e&&"undefined"!==typeof e.detail.downloadFileUrl?e.detail.downloadFileUrl:t}},{key:"showFreeAttributionSlidedown",value:function(){document.querySelector('[data-controller="free-attribution-slidedown"]')&&document.querySelector('[data-controller="free-attribution-slidedown"]').remove();var e,t=document.querySelector('[data-controller*="resource-show-main"]').getAttribute("data-resource-id");e=document.querySelector('[data-controller="resource-show-modal-view"]')?document.querySelector('[data-controller="resource-show-modal-view"]'):document.querySelector(".ez-page-wrapper__content"),Object(c.f)("/resources/".concat(t,"/show_free_attr_slidedown"),e,"afterbegin",(function(){Object(s.O)(d.a.show_page.reveal_free_attribution_slidedown)}))}},{key:"processDlSize",value:function(e){var t=this,n=e.url,o=e.size,r=e.reloadPage,a=void 0!==r&&r;this.mainDlBtn.classList.contains("has-spinner")||Object(y.b)(this.mainDlBtn),Object(c.b)(n,function(){var e=m(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pollForConvertedDlSize({fn:t.checkSizeConversion,fnCondition:t.urlCheck,jobId:n.data.job_id,interval:1e3});case 2:r=e.sent,t.setS3ResponseUrlOrDeliver({url:r.data.url,size:o,reloadPage:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.error(e)}),{params:{size:o}})}},{key:"setS3ResponseUrlOrDeliver",value:function(e){var t=e.url,n=e.size,o=e.reloadPage,r=void 0!==o&&o,a=document.body.querySelector("#download-popup-modal .download-popup");a?(this.dlPopupReady=!0,a.setAttribute("data-download-file-url",t)):this.deliverFile({url:t,downloadSize:n,reloadPage:r})}},{key:"deliverFile",value:function(e){var t=e.url,n=e.downloadSize,o=void 0===n?"original":n,r=e.reloadPage,a=void 0!==r&&r;if(Object(p.k)({data:{action:h.y,label:Object(v.a)(),category:"Show",content_type:"Content-".concat(this.resourceContentType)}}),Object(u.a)({url:t,downloadSize:o,reloadPage:a}),this.mainDlBtn.classList.contains("has-spinner")){var i=this.mainDlBtn;"original"===o?setTimeout((function(){Object(y.a)(i),document.querySelector(".ez-drop-down--download-btn")&&document.querySelector(".ez-drop-down--download-btn").classList.add("is-closed")}),1e3):Object(y.a)(i)}}},{key:"showDownloadAdPopup",value:function(){var e=this.element.dataset.dlAdModalPath;this.element.setAttribute("remote","true"),window.addEventListener("TriggerDownload",this.triggerDownload,{once:!0}),Object(c.e)(e)}},{key:"setDownloadCookie",value:function(e,t){Object(s.C)("download_after_social_signin",e),i.a.set("download_size",t)}},{key:"checkDownloadCookie",value:function(){var e=i.a.get("download_after_social_signin"),t=i.a.get("download_size");if(!this.exceededDownloadLimit&&e&&"true"===document.body.dataset.userSignedIn&&!new URLSearchParams(window.location.search).has("autodl_token")){if(this.element.setAttribute("remote","true"),window.addEventListener("TriggerDownload",this.triggerDownload,{once:!0}),t&&"original"!==t){var n=document.querySelector(".ez-resource-show__sidebar__download-options").dataset.downloadUrl;this.processDlSize({url:n,size:t})}Object(c.e)(e)}i.a.remove("download_after_social_signin"),i.a.remove("download_size")}},{key:"openDownloadLimitModal",value:function(){var e=this.element.dataset.dlLimitModalPath;this.element.setAttribute("remote","true"),this.inFreeTrialValue||Object(p.k)({element:this.element,data:{action:h.ab,category:"Trigger-Download_Limit-".concat(this.dailyDownloadCountValue)}}),Object(c.e)(e)}},{key:"openReturningSigninModal",value:function(){var e=this.element.dataset,t=e.returningSigninModalPath,n=e.licenseType,o=e.dlAdModalPath,r=e.dlLimitModalPath;this.element.setAttribute("remote","true"),Object(p.k)({element:this.element,data:{action:h.kb,category:"Trigger-Download_Click"}}),window.addEventListener("TriggerFreeDownload",this.freeDownload,{once:!0}),Object(c.e)(t,null,null,null,{resource_dl_path:this.element.href,dl_size:i.a.get("download_size"),dl_license_type:n,dl_ad_modal_path:o,dl_limit_modal_path:r})}},{key:"showAccountDunningFreeModal",value:function(){window.addEventListener("ProceedWithFreeDownload",this.proceedWithDownload)}},{key:"triggerFreeDunningDownload",value:function(){Object(s.O)("ProceedWithFreeDownload")}},{key:"confirmCreditSpend",value:function(e){e.preventDefault(),e.stopImmediatePropagation();var t=e.currentTarget.dataset.size||"original";this.creditSpent?this.triggerDownload(e,{size:t}):Object(l.a)(e.currentTarget.getAttribute("data-confirm-text"),this.spendCreditAndDownload,["Okay","Cancel"],{callbackArgs:{event:e,downloadSize:t}})}},{key:"bundleCreditSpend",value:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.spendCreditAndDownload({event:e,downloadSize:"original"})}},{key:"isTurbolinksPreview",get:function(){return document.documentElement.hasAttribute("data-turbolinks-preview")}},{key:"resourceId",get:function(){return document.querySelector(".ez-resource-show").dataset.resourceId}},{key:"resourceType",get:function(){return document.querySelector(".ez-resource-show").dataset.resourceType}},{key:"resourceContentType",get:function(){return document.body.dataset.conversionsContentType||Object(s.g)()}},{key:"exceededDownloadLimit",get:function(){return this.dailyDownloadLimitValue&&this.dailyDownloadCountValue>=this.dailyDownloadLimitValue}},{key:"joinProClick",value:function(e){this.sendDownloadEvent();var t=Object(p.d)(e.target);Object(p.k)({element:e.target,data:{action:h.Z,category:t,label:"Pro"}}),Object(p.l)({action:h.Y,category:t})}},{key:"sendDownloadEvent",value:function(){var e={resourceId:this.resourceId,resourceType:this.resourceType};this.searchData&&(e=Object.assign(e,this.searchData)),Object(s.O)(d.a.download_btn.initial_click,e),Object(p.k)({element:this.element,data:{action:h.x,label:Object(v.a)(),category:"Show",content_type:"Content-".concat(this.resourceContentType)}})}},{key:"trackFreeLicenseSelectorTrigger",value:function(e){Object(p.k)({element:e.currentTarget,data:{action:h.eb,category:"Trigger-Download_Click",label:Object(v.a)(),content_type:"Content-".concat(this.resourceContentType)}})}},{key:"trackLicenseTriggerEvent",value:function(e){Object(p.k)({element:this.element,data:{category:"Trigger-License_Toggle",action:h.eb,label:"Free",content_type:"".concat(Object(s.g)(e))}})}},{key:"trackLicenseCompleteEvent",value:function(e){Object(p.k)({element:this.element,data:{category:"Trigger-License_Toggle",action:h.db,label:"License-".concat(this.element.dataset.licenseType),content_type:"".concat(Object(s.g)(e))}})}},{key:"sendDownloadEventAndRedirect",value:function(e){e.preventDefault(),this.sendDownloadEvent(),Turbolinks.visit(this.element.href)}}])&&_(t.prototype,n),o&&_(t,o),a}(r.a);T.values={dailyDownloadCount:Number,dailyDownloadLimit:Number,inFreeTrial:Boolean};var P=function(){return parseInt(i.a.get("pop_count"),10)||0},C=n(205),L=n.n(C);function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=x(e);if(t){var r=x(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,n,o,r=R(a);function a(){var e;A(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).freeDownload=function(t){t.preventDefault(),e.hasHitDownloadLimit()?e.openDownloadLimitModal():e.downloadButtonTarget.dataset.dlAdModalPath?(e.showDownloadAdPopup(),"editorial"!==e.downloadButtonTarget.getAttribute("data-license-type")&&e.showFreeAttributionSlidedown()):e.triggerDownload()},e.triggerDownload=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.hasHitDownloadLimit()&&e.openDownloadLimitModal(),Object(f.a)(e.resourceId);var o=t&&"undefined"!==typeof t.detail.downloadFileUrl?t.detail.downloadFileUrl:e.downloadButtonTarget.getAttribute("href");n?(window.open(o,"_blank"),Object(p.l)({action:h.y,label:Object(v.a)(),category:"Show",dimensions:{content_type:"Content-".concat(Object(s.g)())}}),window.setTimeout((function(){window.location.reload()}),1e3)):(Object(p.k)({element:e.element,data:{action:h.y,label:Object(v.a)(),category:"Show",content_type:"Content-".concat(Object(s.g)())}}),window.location.href=o)},e.spendCreditAndDownload=function(t){e.triggerDownload(t,!0),e.creditSpent=!0},e}return t=a,(n=[{key:"connect",value:function(){if(!this.isTurbolinksPreview){var e=window.localStorage.getItem("resource-".concat(this.resourceId));e&&(this.searchData=JSON.parse(e),window.localStorage.removeItem("resource-".concat(this.resourceId))),this.flagLoaded()}}},{key:"showFreeAttributionSlidedown",value:function(){document.querySelector('[data-controller="free-attribution-slidedown"]')&&document.querySelector('[data-controller="free-attribution-slidedown"]').remove();var e=document.querySelector('[data-controller*="resource-show-main"]').getAttribute("data-resource-id"),t=document.querySelector(".ez-page-wrapper__content");Object(c.f)("/resources/".concat(e,"/show_free_attr_slidedown"),t,"afterbegin",(function(){Object(s.O)(d.a.show_page.reveal_free_attribution_slidedown)}))}},{key:"curPopCount",get:function(){return P()}},{key:"hasHitDownloadLimit",value:function(){return"true"!==document.body.dataset.userIsPro&&this.curPopCount>=3}},{key:"showDownloadAdPopup",value:function(){var e=this.downloadButtonTarget.dataset.dlAdModalPath;this.downloadButtonTarget.setAttribute("remote","true"),window.addEventListener("TriggerDownload",this.triggerDownload,{once:!0}),Object(c.e)(e)}},{key:"openDownloadLimitModal",value:function(){var e=this.downloadButtonTarget.dataset.dlLimitModalPath;this.downloadButtonTarget.setAttribute("remote","true"),Object(c.e)(e)}},{key:"confirmCreditSpend",value:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.creditSpent?this.triggerDownload():Object(l.a)(e.currentTarget.getAttribute("data-confirm-text"),this.spendCreditAndDownload,["Okay","Cancel"])}},{key:"sendDownloadEvent",value:function(){var e={resourceId:this.resourceId,resourceType:this.resourceType};this.searchData&&(e=Object.assign(e,this.searchData)),Object(s.O)(d.a.download_btn.initial_click,e),Object(p.k)({element:this.element,data:{action:h.x,label:Object(v.a)(),category:"Show",content_type:"Content-".concat(Object(s.g)())}})}},{key:"sendDownloadCompleteEvent",value:function(){Object(p.k)({element:this.element,data:{action:h.y,label:Object(v.a)(),category:"Show",content_type:"Content-".concat(Object(s.g)())}})}},{key:"joinProClick",value:function(e){this.sendDownloadEvent();var t=Object(p.d)(e.target);Object(p.k)({element:e.target,data:{action:h.Z,category:t,label:"Pro"}}),Object(p.l)({action:h.Y,category:t})}},{key:"sendDownloadEventAndRedirect",value:function(e){e.preventDefault(),this.sendDownloadEvent(),L.a.visit(this.downloadButtonTarget.href)}},{key:"isTurbolinksPreview",get:function(){return document.documentElement.hasAttribute("data-turbolinks-preview")}},{key:"resourceId",get:function(){return document.querySelector(".ez-resource-show").dataset.resourceId}},{key:"resourceType",get:function(){return document.querySelector(".ez-resource-show").dataset.resourceType}},{key:"exceededDownloadLimit",get:function(){return this.dailyDownloadLimitValue&&this.dailyDownloadCountValue>=this.dailyDownloadLimitValue}}])&&z(t.prototype,n),o&&z(t,o),a}(r.a);B.targets=["downloadButton"],B.values={dailyDownloadCount:Number,dailyDownloadLimit:Number,inFreeTrial:Boolean};var I=n(11);function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=N(e);if(t){var r=N(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(a,e);var t,n,o,r=U(a);function a(){var e;M(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).reveal=function(){e.element.style.height="".concat(e.innerTarget.offsetHeight,"px"),setTimeout((function(){e.element.classList.add("is-revealed"),e.element.style.height="auto"}),1e3)},e}return t=a,(n=[{key:"connect",value:function(){window.addEventListener(d.a.show_page.reveal_free_attribution_slidedown,this.reveal)}},{key:"disconnect",value:function(){window.removeEventListener(d.a.show_page.reveal_free_attribution_slidedown,this.reveal)}}])&&q(t.prototype,n),o&&q(t,o),a}(I.b);function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=K(e);if(t){var r=K(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}J.targets=["inner"];var Q=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(a,e);var t,n,o,r=Z(a);function a(){return W(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"connect",value:function(){i.a.get("from_successful_checkout")&&i.a.remove("from_successful_checkout")}},{key:"close",value:function(){var e=this;this.element.classList.add("is-collapsed"),setTimeout((function(){e.element.remove()}),1500)}}])&&$(t.prototype,n),o&&$(t,o),a}(I.b),X=n(44),ee=n(208),te=n.n(ee);class ne extends X.default{constructor(){super(...arguments),this.dlAdCountdown=()=>{Number.isNaN(this.count)?this.finishAndDownload():(this.count-=1,this.count<0?this.finishAndDownload():(this.countTarget.innerHTML=this.count.toString(),setTimeout(this.dlAdCountdown,1e3)))}}connect(){super.connect(),this.count=parseInt(this.countTarget.innerHTML,10),this.initAd(),this.setupAdCountdown()}close(e){super.close(e,()=>{},()=>Object(u.c)({manualTrigger:!0}))}initAd(){this.adsScriptLoaded=!1;const e=this.adTemplateTarget.innerHTML;this.adWrapTarget.insertAdjacentHTML("beforeend",e);const t=setInterval(()=>{this.properBuildSlotsReady&&!this.adsScriptLoaded&&(window.properBuildSlots(),this.adsScriptLoaded=!0),this.properBuildSlotsReady&&clearInterval(t)},100)}get properBuildSlotsReady(){return"undefined"!==typeof window.properBuildSlots}setupAdCountdown(){setTimeout(()=>{this.dlAdCountdown()},1e3);new te.a.Circle('[data-download-popup-target="timer"]',{strokeWidth:7,easing:"easeInOut",duration:1e3*this.count,color:"#999999",trailColor:"#cccccc",trailWidth:7,svgStyle:null}).animate(1)}finishAndDownload(){const{dlSize:e,downloadFileUrl:t}=this.downloadPopupContentTarget.dataset;this.setUpAdFinish(),Object(s.O)("TriggerDownload",{size:e,downloadFileUrl:t})}setUpAdFinish(){this.element.querySelector("#download-popup-modal").classList.remove("is-counting-down"),this.element.removeAttribute("data-disable-easy-close");const e=this.element.querySelector(".download-popup__header");e.innerHTML=e.dataset.started;const t=this.element.querySelector(".download-popup__timer"),n=this.element.querySelector(".download-popup__pro-join");this.addHiddenClass(t),this.removeHiddenClass(n),this.downloadPopupContentTarget.classList.add("is-complete"),Object(p.k)({data:{action:h.Z,category:"Trigger-Download_Complete",label:"Free"}})}addHiddenClass(e){e.classList.add("hidden")}removeHiddenClass(e){e.classList.remove("hidden")}trackJoinProClick(){Object(p.l)({action:h.Y,category:"Trigger-Download_Complete"})}}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ae(e,t,n){return(ae="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=se(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=se(e);if(t){var r=se(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ne.targets=["timer","count","adWrap","adTemplate","finishIcon","downloadPopupContent"];var ue=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(a,e);var t,n,o,r=ce(a);function a(){var e;oe(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).category="Trigger-Download_Limit-10",e}return t=a,(n=[{key:"connect",value:function(){ae(se(a.prototype),"connect",this).call(this),Object(p.k)({data:{action:h.Z,category:this.category,label:"Free",non_interaction:!0}})}},{key:"trackClick",value:function(){Object(p.k)({data:{action:h.Y,category:this.category}})}}])&&re(t.prototype,n),o&&re(t,o),a}(X.default),de=n(290);class fe extends de.a{connect(){super.connect(),Object(p.k)({data:{action:h.bc,category:"Trigger-Download_Limit_3",label:"Trial_Day-"+this.currentDayValue,non_interaction:!0}})}lockForm(){this.formSubmitBtnTarget.classList.add("is-loading")}unlockForm(){this.formSubmitBtnTarget.classList.remove("is-loading")}}fe.values={currentDay:String},o.default.register("download-btn",T),n.e(206).then(n.bind(null,1443)).then((function(e){o.default.register("returning-signin",e.default)})),o.default.register("download-btn-pricing",B),o.default.register("free-attribution-slidedown",J),o.default.register("post-purchase-banner",Q),o.default.register("download-popup",ne),o.default.register("daily-limit-join-pro-modal",ue),o.default.register("free-trial-daily-limit-modal",fe)},290:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(18),r=n(7),a=n(52),i=n(22),c=n(8),l=n(68),s=n(38);class u extends s.a{constructor(){super(...arguments),this.updatePlan=e=>{const t=e.currentTarget;this.orderSummaryLoadingTarget.classList.remove("is-hidden"),this.formSubmitBtnTarget.classList.add("is-disabled");const n={plan_id:t.value};this.hasRefundCreditsFieldTarget&&(n.refund_credits=this.refundCreditsFieldTarget.value),Object(o.b)(this.orderApiUrlValue,e=>{this.updateTotals(e.data),this.orderSummaryLoadingTarget.classList.add("is-hidden"),this.formSubmitBtnTarget.classList.remove("is-disabled")},e=>{console.error(e)},{params:n}),this.updateSelectedPlan(t.value)},this.processErrors=e=>{const[t]=e.detail,{errors:n}=t;if(n){const e=[],t=[];let o;n.forEach(n=>{const r=n.message;o=r.indexOf("PaymentDeclinedCVVError")>-1||r.indexOf("Gateway Rejected: cvv")>-1?"invalid_cvv":r.indexOf("PaymentDeclinedError")>-1?"payment_declined":r.indexOf("Plan not found")>-1?"plan_not_found":a.d.includes(r)?"invalid":"payment_failed";const c=Object(i.b)(this.element,o);e.push(`<span class="purchase-modal__error-message">${c}</span>`),t.push(c)}),this.errorContainerTarget.innerHTML=e.join(""),this.errorContainerTarget.classList.remove("is-hidden"),this.sendErrorEvents({errors:t.join(", ")})}},this.submitPurchase=e=>{super.validateFields(),this.formValid||e.preventDefault()},this.editInCheckout=e=>{e.preventDefault(),this.hasRefundCreditsFieldTarget?window.location.href=`${this.checkoutUrlValue}/${this.planSelectTarget.value}?credit_refund_upgrade=true`:window.location.href=`${this.checkoutUrlValue}/${this.planSelectTarget.value}`},this.sendECEvents=({purchaseData:e})=>{const t=JSON.parse(this.selectedPlanValue);Object(r.k)({element:this.element,data:{action:c.B,transaction_id:e.transaction_id,value:Object(l.c)({plan:t}),currency:t.currency,tax:e.tax,items:Object(l.a)({plans:t})}})}}connect(){const e=JSON.parse(this.selectedPlanValue);Object(r.k)({data:{action:c.z,items:Object(l.a)({plans:e}),non_interaction:!0}}),this.flagLoaded()}updateSelectedPlan(e){const t=JSON.parse(this.allPlansDataValue).find(t=>t.remote_id===e);t.plan_type="subscription",this.selectedPlanValue=JSON.stringify(t)}updateTotals(e){this.orderSubtotalTarget.innerHTML=e.base_price,this.orderTaxTarget.innerHTML=e.tax.toString(),this.orderTotalTarget.innerHTML=e.total}purchaseSuccess(e){this.processPurchase({event:e})}processPurchase({event:e,callback:t=null}){const[n]=e.detail;this.sendECEvents({purchaseData:n}),this.sendPurchaseEvents(),t&&t(n),window.location.href=this.redirectUrlValue}sendPurchaseEvents(){}sendErrorEvents({errors:e}){console.error(e)}lockForm(){}unlockForm(){}}u.targets=["orderSubtotal","orderTax","orderTotal","orderSummaryLoading","planSelect","formSubmitBtn","errorContainer","refundCreditsField"],u.values={context:String,orderApiUrl:String,redirectUrl:String,selectedPlan:String,allPlansData:String,checkoutUrl:String}}}]);
//# sourceMappingURL=69-76aaebc01582fe31733b.chunk.js.map