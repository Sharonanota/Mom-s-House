(window.webpackJsonp=window.webpackJsonp||[]).push([[164,7],{1345:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return p}));var r=n(11),o=n(2),u=n(7),i=n(8),c=n(55);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(b,t);var e,n,r,s=f(b);function b(){var t;a(this,b);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=s.call.apply(s,[this].concat(n))).removeEventListeners=function(){var e=setInterval((function(){t.followEventFinished&&(t.element.removeEventListener("ajax:success",t.updateFollowStatus),t.element.removeEventListener("ajax:error",t.initiateFollowChange),clearInterval(e))}),100)},t.followAfterLogin=function(){Object(o.C)("follow_after_login",t.element.dataset.userId),Object(u.k)({data:{category:"Trigger-Contributor_Follow",action:i.kb}}),t.trackContributorFollow({target:t.element})},t.initiateFollowChange=function(){t.selectedContributorId=t.element.dataset.userId,t.contributorsDataElement=document.querySelector("[data-contributors-info]"),t.contributorsDataElement&&document.body.setAttribute("data-updating-follow-status",t.selectedContributorId),document.querySelectorAll('[data-follow-button-target="followButton"][data-user-id="'.concat(t.selectedContributorId,'"]')).forEach((function(t){t.classList.toggle("is-following"),Object(c.b)(t)}))},t.updateFollowStatus=function(){t.contributorsDataElement?(t.updateContributorsInfoElement(),t.updateFollowButtonsWithContributorsInfo()):t.simpleToggleFollowButton()},t.simpleToggleFollowButton=function(){var e=t.element.href,n=t.textWrapTarget.innerHTML;t.textWrapTarget.innerHTML=t.element.dataset.switchText,t.element.dataset.switchText=n,t.element.href=t.element.dataset.switchHref,t.element.dataset.switchHref=e,Object(c.a)(t.element)},t.updateContributorsInfoElement=function(){t.contributorsData=JSON.parse(t.contributorsDataElement.dataset.contributorsInfo),t.element.classList.remove("has-spinner");var e={follow_button_text:t.contributorsData[t.selectedContributorId].follow_button_switch_text,follow_button_switch_text:t.contributorsData[t.selectedContributorId].follow_button_text,follow_button_action:t.contributorsData[t.selectedContributorId].follow_button_switch_action,follow_button_switch_action:t.contributorsData[t.selectedContributorId].follow_button_action,follow_button_class:t.element.className};Object.assign(t.contributorsData[t.selectedContributorId],e),t.contributorsDataElement.dataset.contributorsInfo=JSON.stringify(t.contributorsData),document.body.removeAttribute("data-updating-follow-status")},t.updateFollowButtonsWithContributorsInfo=function(){document.querySelectorAll('[data-follow-button-target="followButton"][data-user-id="'.concat(t.selectedContributorId,'"]')).forEach((function(e){var n=e.querySelector(".ez-spinner--sm");e.classList.remove("has-spinner"),e.querySelector('[data-follow-button-target="textWrap"]').innerHTML=t.contributorsData[t.selectedContributorId].follow_button_text,e.switchText=t.contributorsData[t.selectedContributorId].follow_button_switch_text,e.href=t.contributorsData[t.selectedContributorId].follow_button_action,e.className=t.contributorsData[t.selectedContributorId].follow_button_class,n&&Object(c.a)(e)}))},t.trackContributorFollow=function(t){Object(u.k)({element:t.target,data:{action:i.q,category:"Contributor"}})},t}return e=b,(n=[{key:"connect",value:function(){"follow-button#followAfterLogin"!==this.element.dataset.action&&(this.element.addEventListener("ajax:success",this.updateFollowStatus),this.element.addEventListener("ajax:error",this.initiateFollowChange))}},{key:"disconnect",value:function(){this.removeEventListeners()}},{key:"followEventFinished",get:function(){return!document.body.hasAttribute("data-updating-follow-status")}},{key:"getUsername",value:function(){var t=document.querySelector(".user-profile-layout"),e=document.querySelector(".ez-resource-show__contributor");return(null===t||void 0===t?void 0:t.getAttribute("data-profile-username"))||(null===e||void 0===e?void 0:e.getAttribute("data-contributor-name"))}}])&&l(e.prototype,n),r&&l(e,r),b}(r.b);p.targets=["textWrap","followButton"]},7:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"k",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"g",(function(){return b})),n.d(e,"c",(function(){return p})),n.d(e,"l",(function(){return g})),n.d(e,"i",(function(){return C})),n.d(e,"f",(function(){return m})),n.d(e,"b",(function(){return w})),n.d(e,"j",(function(){return v})),n.d(e,"h",(function(){return h}));var r=n(9),o=n.n(r),u=n(8);const i="conv-evt-trk",c='[data-conversions-category]:not([data-conversions-category=""])',a={en:"English",es:"Spanish",pt:"Portuguese",de:"German",fr:"French",nl:"Dutch",sv:"Swedish",it:"Italian"};function l({element:t=null,data:e}){const n=t||document.body,r=new CustomEvent(i,{bubbles:!0,detail:{...e}});n.dispatchEvent(r)}function d(t){const e=t.closest(c);return e?e.dataset.conversionsCategory:"Unknown"}function f(t){const e=t.closest(c);return e&&e.dataset.referringConversionsCategory?e.dataset.referringConversionsCategory:"Unknown"}function s(){const t=window.location.hostname.split(".");return`${t[1]}.${t[2]}`}function b(){return o.a.getJSON("complete_event_sources")}function p(){o.a.remove("complete_event_sources",{domain:s()})}function g({action:t,category:e,label:n="",value:r=null,valueElementSelector:u="",valueAttribute:i="",dimensions:c={},dataLayer:a,dataLayerCompleteAttrs:l}){const d=b();if(function({sources:t,action:e}){return!!t&&t.some(t=>t.action===e)}({sources:d,action:t}))return;let f={action:t,category:e};n&&(f.label=n),r&&(f.value=r),u&&(f.valueElementSelector=u),i&&(f.valueAttribute=i),c&&(f={...f,...c}),a&&(f.dataLayer=a),l&&(f.dataLayerCompleteAttrs=l);let p=[];d&&Array.isArray(d)&&(p=d),p.push(f),o.a.set("complete_event_sources",p,{domain:s()})}function C(t){return"Language-"+(a[t]?a[t]:"Unknown")}function m(){const t=document.querySelector('meta[name="analytics_data"]');return JSON.parse(t.getAttribute("content"))}function w(t={}){const e={event:u.R,...m(),...t};delete e.snowplow_collector,delete e.snowplow_app_id,window.dataLayer.push(e)}function v(t={}){window.dataLayer.push(t)}function h(){return document.body.getAttribute("data-pageview-guid")}},8:function(t,e,n){"use strict";n.d(e,"pb",(function(){return r})),n.d(e,"R",(function(){return o})),n.d(e,"W",(function(){return u})),n.d(e,"ab",(function(){return i})),n.d(e,"U",(function(){return c})),n.d(e,"V",(function(){return a})),n.d(e,"kb",(function(){return l})),n.d(e,"ib",(function(){return d})),n.d(e,"jb",(function(){return f})),n.d(e,"Tb",(function(){return s})),n.d(e,"Nb",(function(){return b})),n.d(e,"Rb",(function(){return p})),n.d(e,"z",(function(){return g})),n.d(e,"B",(function(){return C})),n.d(e,"A",(function(){return m})),n.d(e,"C",(function(){return w})),n.d(e,"xb",(function(){return v})),n.d(e,"yb",(function(){return h})),n.d(e,"zb",(function(){return _})),n.d(e,"G",(function(){return y})),n.d(e,"ac",(function(){return k})),n.d(e,"bb",(function(){return S})),n.d(e,"hb",(function(){return T})),n.d(e,"fb",(function(){return P})),n.d(e,"gb",(function(){return E})),n.d(e,"Yb",(function(){return L})),n.d(e,"jc",(function(){return I})),n.d(e,"L",(function(){return D})),n.d(e,"D",(function(){return R})),n.d(e,"Z",(function(){return x})),n.d(e,"X",(function(){return F})),n.d(e,"Y",(function(){return O})),n.d(e,"bc",(function(){return B})),n.d(e,"wb",(function(){return j})),n.d(e,"cb",(function(){return A})),n.d(e,"eb",(function(){return U})),n.d(e,"db",(function(){return M})),n.d(e,"p",(function(){return J})),n.d(e,"q",(function(){return N})),n.d(e,"o",(function(){return q})),n.d(e,"x",(function(){return H})),n.d(e,"y",(function(){return W})),n.d(e,"N",(function(){return G})),n.d(e,"M",(function(){return z})),n.d(e,"qb",(function(){return V})),n.d(e,"m",(function(){return K})),n.d(e,"n",(function(){return Y})),n.d(e,"l",(function(){return Z})),n.d(e,"k",(function(){return Q})),n.d(e,"Q",(function(){return X})),n.d(e,"O",(function(){return $})),n.d(e,"P",(function(){return tt})),n.d(e,"ub",(function(){return et})),n.d(e,"tb",(function(){return nt})),n.d(e,"sb",(function(){return rt})),n.d(e,"rb",(function(){return ot})),n.d(e,"vb",(function(){return ut})),n.d(e,"nb",(function(){return it})),n.d(e,"ob",(function(){return ct})),n.d(e,"Ub",(function(){return at})),n.d(e,"Vb",(function(){return lt})),n.d(e,"Wb",(function(){return dt})),n.d(e,"Xb",(function(){return ft})),n.d(e,"b",(function(){return st})),n.d(e,"h",(function(){return bt})),n.d(e,"g",(function(){return pt})),n.d(e,"c",(function(){return gt})),n.d(e,"e",(function(){return Ct})),n.d(e,"d",(function(){return mt})),n.d(e,"f",(function(){return wt})),n.d(e,"mb",(function(){return vt})),n.d(e,"lb",(function(){return ht})),n.d(e,"Bb",(function(){return _t})),n.d(e,"Ab",(function(){return yt})),n.d(e,"Fb",(function(){return kt})),n.d(e,"Cb",(function(){return St})),n.d(e,"Eb",(function(){return Tt})),n.d(e,"Db",(function(){return Pt})),n.d(e,"Gb",(function(){return Et})),n.d(e,"Kb",(function(){return Lt})),n.d(e,"Mb",(function(){return It})),n.d(e,"Lb",(function(){return Dt})),n.d(e,"Hb",(function(){return Rt})),n.d(e,"Jb",(function(){return xt})),n.d(e,"Ib",(function(){return Ft})),n.d(e,"dc",(function(){return Ot})),n.d(e,"cc",(function(){return Bt})),n.d(e,"ic",(function(){return jt})),n.d(e,"ec",(function(){return At})),n.d(e,"gc",(function(){return Ut})),n.d(e,"hc",(function(){return Mt})),n.d(e,"fc",(function(){return Jt})),n.d(e,"j",(function(){return Nt})),n.d(e,"i",(function(){return qt})),n.d(e,"a",(function(){return Ht})),n.d(e,"t",(function(){return Wt})),n.d(e,"s",(function(){return Gt})),n.d(e,"r",(function(){return zt})),n.d(e,"Zb",(function(){return Vt})),n.d(e,"Sb",(function(){return Kt})),n.d(e,"H",(function(){return Yt})),n.d(e,"I",(function(){return Zt})),n.d(e,"J",(function(){return Qt})),n.d(e,"K",(function(){return Xt})),n.d(e,"E",(function(){return $t})),n.d(e,"F",(function(){return te})),n.d(e,"w",(function(){return ee})),n.d(e,"u",(function(){return ne})),n.d(e,"v",(function(){return re})),n.d(e,"Ob",(function(){return oe})),n.d(e,"Pb",(function(){return ue})),n.d(e,"Qb",(function(){return ie})),n.d(e,"T",(function(){return ce})),n.d(e,"S",(function(){return ae}));const r="page_view",o="gtm:datalayer",u="Join_Login (Triggered)",i="Join (Triggered)",c="Join (Click)",a="Join (Complete)",l="Login (Triggered)",d="Login (Click)",f="Login (Complete)",s="Search-Manual (Click)",b="Search-Autosuggestion (Click)",p="Search-Return (Complete)",g="begin_checkout",C="purchase",m="add_to_cart",w="view_item_list",v="Purchase (Click)",h="Purchase (Complete)",_="Purchase (Error)",y="Explore (Click)",k="Trending (Click)",S="Keyword (Click)",T="Locale (Triggered)",P="Locale (Click)",E="Locale (Complete)",L="Social_Share (Click)",I="Zoom (Click)",D="Favorite (Click)",R="Editor (Click)",x="Join_Pro (Triggered)",F="Join_Pro (Click)",O="Join_Pro (Complete)",B="Trial-Upgrade (Triggered)",j="Popular_Searches (Click)",A="Licensing (Click)",U="Licensing (Triggered)",M="Licensing (Complete)",J="Contributor_Selection (Click)",N="Contributor_Follow (Click)",q="Content_Selection (Click)",H="Download (Click)",W="Download (Complete)",G="Filters-Hide (Click)",z="Filters-Applied (Click)",V="Pagination (Click)",K="Collection-Save (Click)",Y="Collection-Save (Complete)",Z="Collection-Remove (Complete)",Q="Collection-Created (Complete)",X="Form (Focus)",$="Form (Complete)",tt="Form (Error)",et="Partner-Infinite_Scroll (Triggered)",nt="Partner-Infinite_Scroll (Click)",rt="Partner-Gray_Box (Triggered)",ot="Partner-Gray_Box (Click)",ut="Partner-Popup (Triggered)",it="Notifications (Click)",ct="Notifications (Complete)",at="Show_Modal-Open (Click)",lt="Show_Modal-Close (Click)",dt="Show_Modal-Next (Click)",ft="Show_Modal-Previous (Click)",st="Cancellation (Click)",bt="Cancellation-Pause (Triggered)",pt="Cancellation-Pause (Complete)",gt="Cancellation (Complete)",Ct="Cancellation-Deal (Triggered)",mt="Cancellation-Deal (Complete)",wt="Cancellation-Downgrade (Triggered)",vt="Multiple Login (Triggered)",ht="Multiple Login (Complete)",_t="Reactivation-Banner (Triggered)",yt="Reactivation-Banner (Complete)",kt="Reactivation-Popup (Triggered)",St="Reactivation-Popup (Click)",Tt="Reactivation-Popup (Error)",Pt="Reactivation-Popup (Complete)",Et="Rebuy (Click)",Lt="Rebuy-Upgrade (Click)",It="Rebuy-Upgrade (Error)",Dt="Rebuy-Upgrade (Complete)",Rt="Rebuy-Popup (Click)",xt="Rebuy-Popup (Error)",Ft="Rebuy-Popup (Complete)",Ot="Upgrade-Banner (Triggered)",Bt="Upgrade-Banner (Complete)",jt="Upgrade-Popup (Triggered)",At="Upgrade-Popup (Click)",Ut="Upgrade-Popup (Error)",Mt="Upgrade-Popup (Refund Error)",Jt="Upgrade-Popup (Complete)",Nt="Cancellation-Bundles (Triggered)",qt="Cancellation-Bundles (Complete)",Ht="Bundles-Toast (Click)",Wt="Reviews (Triggered)",Gt="Reviews (Yes)",zt="Reviews (No)",Vt="Book-Demo (Click)",Kt="Search-Infinite-Page (Triggered)",Yt="Menu-Bundles (Click)",Zt="Menu-Photo (Click)",Qt="Menu-Vector (Click)",Xt="Menu-Video (Click)",$t="Start New (Click)",te="Template (Click)",ee="Custom_Design (Triggered)",ne="Custom_Design-Checkbox (Click)",re="Custom_Design (Complete)",oe="Search-Image (Click)",ue="Search-Image (Complete)",ie="Search-Image (Error)",ce="Homepage_Banner (Triggered)",ae="Homepage_Banner (Complete)"}}]);
//# sourceMappingURL=follow-button-controller-82ff045373ba264244d3.chunk.js.map