(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{1272:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(13),a=n(9),c=n.n(a);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r,o=l(a);function a(){return i(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"connect",value:function(){this.sendBeaconIfNecessary()}},{key:"sendBeaconIfNecessary",value:function(){if(window.aBDetected&&!c.a.get("aBDetected")){c.a.set("aBDetected",!0);var e=new FormData;e.append(this.csrfParam,this.csrfToken),e.append("eventAction","AdBlocker"),e.append("eventCategory",document.body.dataset.conversionsCategory),e.append("nonInteractive",!0),window.navigator.sendBeacon(this.trackingUrl,e)}}},{key:"trackingUrl",get:function(){return this.element.dataset.abDetectionUrl}},{key:"csrfParam",get:function(){var e=document.querySelector("meta[name=csrf-param]");return e?e.content:null}},{key:"csrfToken",get:function(){var e=document.querySelector("meta[name=csrf-token]");return e?e.content:null}}])&&u(t.prototype,n),r&&u(t,r),a}(o.a),h=n(11),y=n(14);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,e);var t,n,r,o=m(a);function a(){var e;v(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).sendEvent=function(e){window.dataLayer.push({event:e.type})},e}return t=a,(n=[{key:"connect",value:function(){this.removeGTMListeners(),this.registerGTMListeners()}},{key:"disconnect",value:function(){this.removeGTMListeners()}},{key:"registerGTMListeners",value:function(){window.addEventListener(y.a.turbolinks.load,this.sendEvent,{once:!1})}},{key:"removeGTMListeners",value:function(){window.removeEventListener(y.a.turbolinks.load,this.sendEvent,{once:!1})}}])&&b(t.prototype,n),r&&b(t,r),a}(h.b),O=n(7);function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o=E(a);function a(){return j(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"track",value:function(e){var t={action:this.trackActionValue};this.hasTrackLabelValue&&(t.label=this.trackLabelValue),this.hasTrackValueValue&&(t.value=this.trackValueValue),Object.assign(t,this.processIncludedData());var n={data:t};this.sendFromElementValue&&(n.element=e.target),Object(O.k)(n)}},{key:"trackComplete",value:function(e){Object(O.l)({action:this.completeActionValue,category:Object(O.d)(e.target)})}},{key:"processIncludedData",value:function(){var e=this;if(!this.hasIncludeDataValue)return{};var t={};return this.includeDataValue.split(",").map((function(e){return e.trim()})).forEach((function(n){t[n]=e.element.dataset[n]})),t}}])&&P(t.prototype,n),r&&P(t,r),a}(o.a);T.values={trackAction:String,completeAction:String,trackLabel:String,trackValue:String,includeData:String,sendFromElement:{type:Boolean,default:!0}};var B=n(8);class C extends o.a{constructor(){super(...arguments),this.sendFormFieldFocusEvent=e=>{const t=e.currentTarget.dataset.englishLabel;Object(O.k)({element:e.currentTarget,data:{action:B.Q,category:Object(O.d)(e.currentTarget),label:"Field-"+t}})},this.sendFormFieldErrorEvent=e=>{const t=e.dataset.englishLabel;Object(O.k)({element:e,data:{action:B.P,label:"Field-"+t,category:Object(O.d)(e),error_trigger:"Error-Submission"}})}}connect(){this.hasErrorFieldTarget&&this.errorFieldTargets.forEach(e=>{this.sendFormFieldErrorEvent(e)})}}C.targets=["errorField"];var L=n(2);function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(a,e);var t,n,r,o=x(a);function a(){return F(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"connect",value:function(){}},{key:"track",value:function(){var e=this.clickFormData();window.navigator.sendBeacon("/api/v2/tracking/clicks",e)}},{key:"trackAnalytics",value:function(){var e=Object(L.G)(this.element.dataset.eventType,y.a);Object(L.O)(e,{})}},{key:"clickFormData",value:function(){var e=new FormData;e.append(this.csrfParam,this.csrfToken);for(var t=0;t<this.element.attributes.length;t+=1){var n=this.element.attributes[t];if(n.name.match(/^data-/)){var r=n.name.replace("data-","").replace("-","_");["controller","action"].includes(r)||e.append(r,n.value)}}return e}},{key:"normalizeParamName",value:function(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}}])&&A(t.prototype,n),r&&A(t,r),a}(o.a);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){o=!0,a=u}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var o=$(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(a,e);var t,n,r,o=Q(a);function a(){var e;J(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).sendSearchClick=function(t){var n=e.searchClickData(t);e.sendBeacon("/api/v2/tracking/search/clicks",n),window.localStorage.setItem("resource-".concat(t.detail.resourceId),JSON.stringify(n))},e.sendSponsoredSearchClick=function(t){var n=e.searchSponsoredClickData(t);e.sendBeacon("/api/v2/tracking/search/sponsored_clicks",n)},e.sendSearchDownload=function(t){var n=e.searchDownloadData(t);n&&e.sendBeacon("/api/v2/tracking/search/downloads",n)},e}return t=a,(n=[{key:"connect",value:function(){Object(L.s)()||(window.addEventListener(y.a.search.click,this.sendSearchClick),window.addEventListener(y.a.search.sponsored_click,this.sendSponsoredSearchClick),window.addEventListener(y.a.download_btn.initial_click,this.sendSearchDownload)),this.sendPageView()}},{key:"disconnect",value:function(){window.removeEventListener(y.a.search.click,this.sendSearchClick),window.removeEventListener(y.a.search.sponsored_click,this.sendSponsoredSearchClick),window.removeEventListener(y.a.download_btn.initial_click,this.sendSearchDownload)}},{key:"sendBeacon",value:function(e,t){if("test"===document.body.getAttribute("data-env")){var n=c.a.getJSON("searchEventsSent")||[];return n.push({url:e,data:t}),void c.a.set("searchEventsSent",n,{domain:".example.com"})}var r=new FormData;r.append(this.csrfParam,this.csrfToken),Object.keys(t).forEach((function(e){r.append(e,t[e])})),window.navigator.sendBeacon(e,r)}},{key:"sendPageView",value:function(){Object(L.e)("search-tracking")&&this.isSearchResultsPage&&(Object(L.s)()||this.sendBeacon("/api/v2/tracking/search/pageviews",this.pageViewData))}},{key:"csrfParam",get:function(){var e=document.querySelector("meta[name=csrf-param]");return e?e.content:null}},{key:"csrfToken",get:function(){var e=document.querySelector("meta[name=csrf-token]");return e?e.content:null}},{key:"isSearchResultsPage",get:function(){return!(!document.querySelector("[data-search-results-count]")||document.querySelector("#resource-show-modal-view"))}},{key:"pageViewData",get:function(){var e=this,t={};return["actual_free_results_shown_count","actual_pro_results_shown_count","algo_version","content_type","domain","filters_used","filter_params_json","guid","ignore","internal","locale","max_free_results_shown_count","max_pro_results_shown_count","page","pageview_guid","pro","referrer","results_count","split_test_name","split_test_variant","term","total_free_results","total_pro_results","type","user_guid"].forEach((function(n){t[n]=e.element.getAttribute("data-search-".concat(n.replace(/_/g,"-")))||""})),t}},{key:"searchClickData",value:function(e){var t=this.pageViewData;return t.resource_id=e.detail.resourceId,t.resource_position=e.detail.resourcePosition,t.resource_pro=e.detail.resourcePro,t}},{key:"searchSponsoredClickData",value:function(e){var t=this.pageViewData;return t.resource_id=e.detail.resourceId,t.resource_position=e.detail.resourcePosition,t.resource_pro=e.detail.resourcePro,t.sponsored=e.detail.sponsored,t}},{key:"searchDownloadData",value:function(e){if(!e.detail.guid)return null;var t={};return Object.entries(e.detail).forEach((function(e){var n=M(e,2),r=n[0],o=n[1];t[r]=o})),t}}])&&U(t.prototype,n),r&&U(t,r),a}(h.b);r.default.register("ab-detection",d),r.default.register("google-tag-manager",_),r.default.register("event-tracker",T),r.default.register("form-analytics",C),r.default.register("click-track",G),r.default.register("search-analytics",H)}}]);
//# sourceMappingURL=91-448edf6f5fb5fc58f283.chunk.js.map